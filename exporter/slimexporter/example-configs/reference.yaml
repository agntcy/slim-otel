# Reference configuration for the SLIM OpenTelemetry Exporter
# Slim exporter config
slim:
  # address of the SLIM node where to connect
  endpoint: "http://127.0.0.1:46357"
  # list of the exporter names for each signal type
  exporter-names:
    # name for metrics producer
    # add this name to your SLIM channel to receive metrics from this exporter
    # default is "agntcy/otel/exporter-metrics"
    metrics: "agntcy/otel/exporter-metrics"
    # name for traces producer
    # add this name to your SLIM channel to receive traces from this exporter
    # default is "agntcy/otel/exporter-traces"
    traces: "agntcy/otel/exporter-traces"
    # name for logs producer
    # add this name to your SLIM channel to receive logs from this exporter
    # default is "agntcy/otel/exporter-logs"
    logs: "agntcy/otel/exporter-logs"
  
  # Authentication configuration for application identity
  # Choose ONE of the following methods:
  auth:
    # Method 1: Shared Secret Authentication
    # Simple symmetric key authentication
    shared-secret: "a-very-long-shared-secret-0123456789-abcdefg"
    
    # Method 2: Static JWT Token Authentication
    static-jwt:
      # Path to the file containing the JWT token (auto-reloaded on change)
      file: "/path/to/jwt-token.txt"
      # Optional: Duration for token cache refresh (default: 3600s)
      duration: "3600s"
    
    # Method 3: Dynamic JWT Authentication with Signing Keys
    jwt:
      # JWT claims configuration
      claims:
        # Audience claim(s) - list of expected audiences
        audience:
          - "slim"
        # Issuer claim - who issued the token
        issuer: "slim"
        # Subject claim - identifies the principal (typically this application)
        subject: "slim"
      # Token validity duration (e.g., "3600s", "1h")
      duration: "3600s"
     # Key configuration - use 'decoding' for applications signing JWTs
      key:
        decoding:
          algorithm: "RS256"  # Options: HS256, HS384, HS512, ES256, ES384, RS256, RS384, RS512, PS256, PS384, PS512, EdDSA
          format: "PEM"       # Options: PEM, JWK or JWKS
          key:
            # file path to the private key
            file: "/path/to/private-key.pem"
            # OR embed the key directly
            data: "-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----"
    
    # Method 4: SPIRE Workload Identity Authentication 
    spire:
      # Path to the SPIRE agent socket
      socket-path: "unix:///tmp/spire-agent/public/api.sock"
      # Target SPIFFE ID for the SLIM server you're connecting to
      target-spiffe-id: "spiffe://example.org/slim-server"
      # JWT audience claims for SPIRE-issued JWTs
      jwt-audiences:
        - "slim"
      # Optional: specific trust domains to include
      trust-domains:
        - "example.org"
        - "partner.com"
  
  # channels configuration
  # if no channel is defiend the exporter will listen for invitation
  # to join channels sent from other participants
  channels:
    # names of the SLIM channels to create.
    - channel-name: "agntcy/otel/channel-metrics"
      # sigal type for this channel: metrics, traces, or logs
      signal: metrics
      # list of participants to invite to this channel
      participants:
        - "agntcy/otel/receiver"
        - "agntcy/otel/another-receiver"
      # flag to enable or disable MLS for this session
      mls-enabled: true
    - channel-name: "agntcy/otel/channel-traces"
      signal: traces
      participants:
        - "agntcy/otel/receiver"
      mls-enabled: true
