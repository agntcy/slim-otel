receivers:
  otlp:
    protocols:
      grpc:
        endpoint: 0.0.0.0:4317
      http:
        endpoint: 0.0.0.0:4318

processors:
  batch:
    timeout: 1s
    send_batch_size: 1024

exporters:
  # Slim exporter config
  slim:
    # SLIM endpoint configuration
    slim_endpoint:
      # Address of the SLIM endpoint to connect to (required)
      address: "127.0.0.1:46357"
      
      # Origin header value ((HTTP Host authority override - optional)
      # origin: "https://example.com"
      
      # TLS SNI server name override (optional)
      # server_name: "slim.example.com"
      
      # Compression algorithm (optional)
      # Options: "gzip", "zlib", "deflate", "snappy", "zstd", "lz4", "none", "empty"
      # compression: "gzip"
      
      # Rate limit for requests (optional)
      # Examples: "100/s" (100 per second)
      # rate_limit: "100/s"
      
      # Connection timeout (optional)
      # connect_timeout: 10s
      
      # Request timeout (optional)
      # request_timeout: 30s
      
      # Buffer size in bytes (optional)
      # buffer_size: 65536
      
      # Additional headers to include in requests (optional)
      # headers:
      #   X-Custom-Header: "value"
      #   X-Another-Header: "another-value"
      
      # Arbitrary user-provided metadata as JSON string (optional)
      # metadata: "custom-metadata-string"
      
      # TLS configuration
      tls:
        # Set to true for insecure connections (no TLS)
        insecure: true
        
        # TLS version constraint
        # Options: "tls1.2", "tls1.3"
        # Default: "tls1.3"
        # tls_version: "tls1.3"
        
        # Include system CA certificates pool (client only)
        # Default: true
        # include_system_ca_certs_pool: true
        
        # Skip server name verification (INSECURE)
        # Default: false
        # insecure_skip_verify: false
        
        # CA source for verifying server certificates (client side)
        # Option 1: Load from file
        # ca_source:
        #   type: file
        #   path: "./certs/ca-cert.pem"
        
        # Option 2: Inline PEM data
        # ca_source:
        #   type: pem
        #   data: |
        #     -----BEGIN CERTIFICATE-----
        #     ...
        #     -----END CERTIFICATE-----
        
        # Option 3: No CA verification
        # ca_source:
        #   type: none
        
        # For mTLS (mutual TLS), provide client certificate and key
        # source:
        #   type: file
        #   cert: "./certs/client-cert.pem"
        #   key: "./certs/client-key.pem"
        
        # Full mTLS example:
        # tls:
        #   insecure: false
        #   tls_version: "tls1.3"
        #   include_system_ca_certs_pool: true
        #   source:
        #     type: file
        #     cert: "./certs/client-cert.pem"
        #     key: "./certs/client-key.pem"
        #   ca_source:
        #     type: file
        #     path: "./certs/ca-cert.pem"
      
      # Authentication configuration
      auth:
        # Basic authentication
        type: basic
        basic:
          username: "username"
          password: "password"
        
        # Static JWT authentication (read token from file)
        # type: static_jwt
        # static_jwt:
        #   token_file: "/run/secrets/jwt-token"
        #   duration: 1h  # Cache validity before re-reading file
        
        # JWT authentication with ECDSA (ES256)
        # type: jwt
        # jwt:
        #   duration: 1h
        #   audience: ["slim"]
        #   issuer: "slim"
        #   subject: "slim"
        #   key:
        #     # Supported algorithms: ES256, ES384, ES512, RS256, RS384, RS512, PS256, PS384, PS512, HS256, HS384, HS512, EdDSA
        #     algorithm: "ES256"
        #     format: pem
        #     key:
        #       # Option 1: Inline key data
        #       data: |
        #         -----BEGIN PRIVATE KEY-----
        #         MIGHAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBG0wawIBAQQgHxGmmgX3iqp2IObA
        #         xpAHLQG38v8KPjkgvUKL3YUQoruhRANCAATcA5dEBtjnE/T3Dv0dxsjoXDPeMcRS
        #         6R6skqjLgcd4jtiMS79ZdKbr0Lu97wh3IuAWdf4pFSRZ+PRHbBNFThVh
        #         -----END PRIVATE KEY-----
        #       # Option 2: Load from file
        #       # file: "./keys/jwt-private.pem"
        
        # JWT authentication with RSA (RS256)
        # type: jwt
        # jwt:
        #   duration: 1h
        #   audience: ["slim"]
        #   issuer: "slim"
        #   subject: "slim"
        #   key:
        #     algorithm: "RS256"
        #     format: pem
        #     key:
        #       data: |
        #         -----BEGIN PRIVATE KEY-----
        #         <RSA Private Key>
        #         -----END PRIVATE KEY-----
        
        # JWT authentication with HMAC (HS256)
        # type: jwt
        # jwt:
        #   duration: 1h
        #   audience: ["slim"]
        #   issuer: "slim"
        #   subject: "slim"
        #   key:
        #     algorithm: "HS256"
        #     format: pem
        #     key:
        #       data: "shared-secret-key"
      
      # Keepalive configuration (optional)
      # keepalive:
      #   tcp_keepalive: 30s      # TCP keepalive duration
      #   http2_keepalive: 30s    # HTTP/2 keepalive duration
      #   timeout: 20s            # Keepalive timeout
      #   keep_alive_while_idle: true
      
      # Proxy configuration (optional)
      # proxy:
      #   url: "http://proxy.example.com:8080"
      #   username: "proxy-user"
      #   password: "proxy-password"
      #   headers:
      #     X-Proxy-Header: "value"
      #   # TLS configuration for the proxy connection
      #   tls:
      #     insecure: false
      #     ca_source:
      #       type: file
      #       path: "./certs/proxy-ca.pem"
      
      # Backoff configuration for retries (optional)
      # backoff:
      #   # Exponential backoff
      #   type: exponential
      #   exponential:
      #     base: 1s           # Base duration
      #     factor: 2          # Multiplication factor
      #     max_delay: 30s     # Maximum delay between retries
      #     max_attempts: 5    # Maximum number of retry attempts
      #     jitter: true       # Enable jitter
      #
      #   # Fixed interval backoff
      #   # type: fixed_interval
      #   # fixed_interval:
      #   #   interval: 5s
      #   #   max_attempts: 3
    
    # list of the exporter names for each signal type
    exporter-names:
      # name for metrics producer
      # add this name to your SLIM channel to receive metrics from this exporter
      # default is "agntcy/otel/exporter-metrics"
      metrics: "agntcy/otel/exporter-metrics"
      # name for traces producer
      # add this name to your SLIM channel to receive traces from this exporter
      # default is "agntcy/otel/exporter-traces"
      traces: "agntcy/otel/exporter-traces"
      # name for logs producer
      # add this name to your SLIM channel to receive logs from this exporter
      # default is "agntcy/otel/exporter-logs"
      logs: "agntcy/otel/exporter-logs"
    # shared secret used for MLS and identity provider
    shared-secret: "a-very-long-shared-secret-0123456789-abcdefg"
    # channels configuration
    # if no channel is defiend the exporter will listen for invitation
    # to join channels sent from other participants
    channels:
      # names of the SLIM channels to create.
      - channel-name: "agntcy/otel/channel-metrics"
        # sigal type for this channel: metrics, traces, or logs
        signal: metrics
        # list of participants to invite to this channel
        participants:
          - "agntcy/otel/receiver"
        # flag to enable or disable MLS for this session
        mls-enabled: true
      - channel-name: "agntcy/otel/channel-traces"
        signal: traces
        participants:
          - "agntcy/otel/receiver"
        mls-enabled: true

service:
  telemetry:
    logs:
      level: info
    metrics:
      level: none

  pipelines:
    traces:
      receivers: [otlp]
      processors: [batch]
      exporters: [slim]
    
    metrics:
      receivers: [otlp]
      processors: [batch]
      exporters: [slim]
    
    logs:
      receivers: [otlp]
      processors: [batch]
      exporters: [slim]
